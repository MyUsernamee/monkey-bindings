name: NDK build
on:
  workflow_dispatch:
  push:
    paths-ignore:
      - '**.yml'
      - '!.github/workflows/BuildMod.yml'
      - '**.json'
      - '!qpm.json'
      - '**.ps1'
      - '!build.ps1'
      - '!buildQMOD.ps1'
      - '**.md'
      - '.gitignore'
      - '**.zip'
env:
     module_id: mymod
     version: 0.1.0-Dev.${{ github.run_number }}

jobs:
  build:
    runs-on: ubuntu-22.04
    
    steps:
    - uses: actions/checkout@v2
      name: Checkout
      with:
        submodules: true
        lfs: true 
    - uses: seanmiddleditch/gha-setup-ninja@v3
    - name: Setup Android NDK
      # You may pin to the exact commit or the version.
      # uses: nttld/setup-ndk@b2abc75192ee2a1ec118c8238fd86dec6d96dc43
      uses: nttld/setup-ndk@v1.0.6
      with:
        # Exact version to use
        ndk-version: r23c
        # Add installation directory to path
        add-to-path: true
        run: "nkd-build"
